{% extends "base.html" %}

{% block title %}{% if order %}ç·¨è¼¯è¨‚å–®{% else %}æ–°å¢è¨‚å–®{% endif %}{% endblock %}

{% block content %}
<div class="form-page">
    <div class="page-header">
        <h1>{% if order %}ç·¨è¼¯è¨‚å–®{% else %}æ–°å¢è¨‚å–®{% endif %}</h1>
    </div>

    {% if error %}
    <div class="alert alert-error">{{ error }}</div>
    {% endif %}

    <div class="section">
        <form method="POST" class="order-form">
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">è¨‚å–®è™Ÿ</label>
                    <input type="text" name="order_number" class="form-input" 
                           value="{{ order.order_number if order else '' }}" 
                           {% if order %}readonly{% endif %}
                           placeholder="ç•™ç©ºå‰‡å‰µå»ºè©¢åƒ¹/ä¿®åœ–éœ€æ±‚ï¼ˆè‡ªå‹•ç”Ÿæˆç·¨è™Ÿï¼‰">
                    {% if order %}
                        <div class="form-hint">è¨‚å–®è™Ÿä¸å¯ä¿®æ”¹</div>
                    {% else %}
                        <div class="form-hint">ğŸ’¡ ä¸å¡«è¨‚å–®è™Ÿå°‡å‰µå»ºè©¢åƒ¹/ä¿®åœ–éœ€æ±‚ï¼ˆè‡ªå‹•ç”ŸæˆREV-æ—¥æœŸ-æµæ°´è™Ÿï¼‰</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label class="form-label">å®¢æˆ¶åç¨± <span style="color: var(--status-danger);">*</span></label>
                    <input type="text" name="customer_name" class="form-input" 
                           value="{{ order.customer_name if order else '' }}" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">è¨‚å–®æ—¥æœŸ <span style="color: var(--status-danger);">*</span></label>
                    <input type="date" name="order_date" class="form-input" 
                           value="{{ order.order_date if order else '' }}" required>
                </div>

                <div class="form-group">
                    <label class="form-label">é è¨ˆäº¤è²¨æ—¥æœŸ</label>
                    <input type="date" name="expected_delivery_date" class="form-input" 
                           value="{{ order.expected_delivery_date if order else '' }}">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">ç”Ÿç”¢é¡å‹</label>
                    <input type="text" name="production_type" class="form-input" 
                           value="{{ order.production_type if order else '' }}" 
                           placeholder="ä¾‹å¦‚ï¼šç§‘èŠå°èŠ±ã€é›ªç¹”å°èŠ±">
                </div>

                <div class="form-group">
                    <label class="form-label">ç”¢å“ç·¨è™Ÿ</label>
                    <input type="text" name="product_code" class="form-input" 
                           value="{{ order.product_code if order else '' }}">
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">èŠ±å‹ç·¨è™Ÿ</label>
                <input type="text" name="pattern_code" class="form-input" 
                       value="{{ order.pattern_code if order else '' }}">
            </div>

            <div class="form-group">
                <label class="form-label">å‚™è¨»</label>
                <textarea name="notes" class="form-textarea" 
                          placeholder="è¼¸å…¥å‚™è¨»ä¿¡æ¯...">{{ order.notes if order else '' }}</textarea>
            </div>

            <div class="form-actions">
                <a href="{% if order %}{{ url_for('tracking_bp.order_detail', order_number=order.order_number) }}{% else %}{{ url_for('tracking_bp.orders') }}{% endif %}" 
                   class="btn btn-secondary">å–æ¶ˆ</a>
                <button type="submit" class="btn btn-primary">ä¿å­˜</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
.form-page {
    max-width: 900px;
    margin: 0 auto;
}

.order-form {
    max-width: 100%;
}

.form-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-bottom: 1.5rem;
}

.form-actions {
    display: flex;
    justify-content: flex-end;
    gap: 1rem;
    margin-top: 2rem;
    padding-top: 2rem;
    border-top: 1px solid var(--border-color);
}
</style>
{% endblock %}

