<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Ë®ÇÂñÆÊµÅÁ®ãËøΩËπ§Á≥ªÁµ±{% endblock %}</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('tracking_bp.static', filename='css/tracking.css') }}">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- È†ÇÈÉ®Â∞éËà™Ê¨Ñ -->
    <div class="header">
        <div class="header-content">
            <div class="title">ËÆ¢ÂçïÊµÅÁ®ãËøΩË∏™Á≥ªÁªü</div>
            
            <div class="nav-user">
                <span class="user-name">üë§ {{ session.get('display_name', 'Áî®Êà∂') }}</span>
                <a href="{{ url_for('tracking_bp.logout') }}" class="nav-link">ÁôªÂá∫</a>
            </div>
        </div>
    </div>

    <div class="app-layout" id="appLayout">
        <button class="sidebar-toggle" 
                onclick="toggleSidebar()" 
                title="Êë∫Áñä/Â±ïÈñãÂÅ¥ÈÇäÊ¨Ñ"
                aria-label="ÂàáÊèõÂÅ¥ÈÇäÊ¨Ñ">
            <span class="toggle-icon">‚ò∞</span>
        </button>
        
        <!-- Â∑¶ÂÅ¥ÈÇäÊ¨Ñ -->
        <aside class="sidebar">
            <div class="sidebar-menu">
                <a href="{{ url_for('tracking_bp.index') }}" 
                   class="sidebar-item {% if request.endpoint == 'tracking_bp.index' %}active{% endif %}"
                   data-tooltip="‰∏ªÈ†Å">
                    <span class="sidebar-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                            <polyline points="9 22 9 12 15 12 15 22"></polyline>
                        </svg>
                    </span>
                    <span class="sidebar-text">‰∏ªÈ†Å</span>
                </a>
                
                {% if session.get('role') == 'admin' %}
                <button class="sidebar-item sidebar-button" 
                        onclick="showNewOrderModal()"
                        data-tooltip="Êñ∞Â¢ûË®ÇÂñÆ">
                    <span class="sidebar-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                    </span>
                    <span class="sidebar-text">Êñ∞Â¢ûË®ÇÂñÆ</span>
                </button>
                
                <a href="{{ url_for('tracking_bp.admin_users') }}" 
                   class="sidebar-item {% if request.endpoint == 'tracking_bp.admin_users' %}active{% endif %}"
                   data-tooltip="Áî®Êà∂ÁÆ°ÁêÜ">
                    <span class="sidebar-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                    </span>
                    <span class="sidebar-text">Áî®Êà∂ÁÆ°ÁêÜ</span>
                </a>
                {% endif %}
                
                {% if session.get('role') == 'sales' %}
                <!-- Ê•≠ÂãôÂì°Â∞àÁî®ÂäüËÉΩÔºàÊú™‰æÜÊì¥Â±ïÔºâ -->
                {% endif %}
            </div>
            
            <!-- Ë®≠ÂÆöÊåâÈàï - ÊîæÂú®ÊúÄ‰∏ãÈù¢ -->
            <div class="sidebar-footer">
                <button class="sidebar-item sidebar-button" 
                        onclick="openSettings()"
                        data-tooltip="Ë®≠ÂÆö">
                    <span class="sidebar-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M12 1v6m0 6v6m9-7h-6m-6 0H3m15.364 6.364l-4.243-4.243m-4.242 0L5.636 18.364M18.364 5.636l-4.243 4.243m-4.242 0L5.636 5.636"></path>
                        </svg>
                    </span>
                    <span class="sidebar-text">Ë®≠ÂÆö</span>
                </button>
            </div>
        </aside>

        <!-- ‰∏ªÂÖßÂÆπÂçÄ -->
        <main class="main-content">
            {% block content %}{% endblock %}
        </main>
    </div>

    <!-- ÂÖ±Áî®ÔºöÂÅ¥ÈÇäÊäΩÂ±úË¶ÜËìãÂ±§ -->
    <div class="drawer-overlay" id="detailDrawerOverlay" onclick="closeDetailDrawer()"></div>

    <!-- ÂÖ±Áî®Ôºö‰æßËæπÊäΩÂ±â - ÊîπËøõÁâà -->
    <div class="detail-drawer" id="detailDrawer">
        <div class="drawer-header">
            <div class="drawer-header-main">
                <div class="drawer-order-badge">ORDER DETAILS</div>
                <button class="drawer-close" onclick="closeDetailDrawer()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            
            <!-- Ë®ÇÂñÆËôüÁ¢ºÂíåÂÆ¢Êà∂ - ÊîæÂú® ORDER DETAILS ÂçÄÂ°äÂÖß -->
            <div class="drawer-main-info">
                <div class="main-info-item">
                    <span class="main-info-label">Ë®ÇÂñÆËôüÁ¢º</span>
                    <span class="main-info-value">
                        <span class="order-hash">#</span>
                        <span id="drawerOrderNumber">-</span>
                    </span>
                </div>
                <div class="main-info-item">
                    <span class="main-info-label">ÂÆ¢Êà∂</span>
                    <span class="main-info-value" id="drawerCustomerName">-</span>
                </div>
            </div>
            
            <!-- ÂÖ∂‰ªñ‰ø°ÊÅØÂçÄÂüü -->
            <div class="drawer-order-info">
                <div class="info-row">
                    <div class="info-item">
                        <span class="info-label">Á∏ΩËÄóÊôÇ</span>
                        <span class="info-value" id="drawerTotalDays">0 Â§©</span>
                    </div>
                    <div class="info-item" id="drawerExpectedDelivery" style="display: none;">
                        <span class="info-label">È†êË®à‰∫§Ë≤®</span>
                        <span class="info-value" id="drawerExpectedDeliveryDate">-</span>
                    </div>
                </div>
            </div>
            
            <!-- Ë®ÇÂñÆÂÇôË®ª - ÂèØÁ∑®ËºØ -->
            <div class="drawer-order-notes-compact" id="drawerOrderNotes" style="display: none;" data-order-number="">
                <div class="drawer-notes-container">
                    <button class="drawer-notes-edit-btn" 
                            onclick="toggleDrawerNotesEdit(this); event.stopPropagation();"
                            title="Á∑®ËºØÂÇôË®ª">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                        </svg>
                    </button>
                    <div class="drawer-notes-display">
                        <span class="drawer-notes-text" id="drawerOrderNotesContent">-</span>
                    </div>
                    <div class="drawer-notes-edit" style="display: none;">
                        <textarea class="drawer-notes-input" rows="2" placeholder="Ëº∏ÂÖ•ÂÇôË®ª..."></textarea>
                        <div class="drawer-notes-edit-actions">
                            <button class="drawer-notes-save-btn" onclick="saveDrawerNotes(this); event.stopPropagation();">‰øùÂ≠ò</button>
                            <button class="drawer-notes-cancel-btn" onclick="cancelDrawerNotesEdit(this); event.stopPropagation();">ÂèñÊ∂à</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="drawer-body">
            <!-- Âø´ÈÄüÊìç‰ΩúÂå∫ -->
            <div class="drawer-section" id="drawerQuickActions" style="display: none;">
                <div class="section-header">
                    <div class="section-icon">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
                        </svg>
                    </div>
                    <div class="section-title">Âø´ÈÄüÊìç‰Ωú</div>
                </div>
                <div class="actions-grid" id="drawerActionsGrid">
                    <!-- Áî±JavaScriptÂä®ÊÄÅÁîüÊàê -->
                </div>
            </div>
            
            <!-- ËÆ¢ÂçïÁÆ°ÁêÜÂå∫ -->
            <div class="drawer-section" id="drawerManagement" style="display: none;">
                <div class="section-header">
                    <div class="section-icon">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M12 1v6m0 6v6"></path>
                        </svg>
                    </div>
                    <div class="section-title">ËÆ¢ÂçïÁÆ°ÁêÜ</div>
                </div>
                <div class="actions-grid">
                    <button class="drawer-action-btn btn-secondary" onclick="editOrderFromDrawer()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                        </svg>
                        ÁºñËæëËÆ¢Âçï
                    </button>
                    <button class="drawer-action-btn btn-danger-outline" onclick="cancelOrderFromDrawer()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="15" y1="9" x2="9" y2="15"></line>
                            <line x1="9" y1="9" x2="15" y2="15"></line>
                        </svg>
                        ÂèñÊ∂àËÆ¢Âçï
                    </button>
                </div>
            </div>
            
            <!-- Êó∂Èó¥ËΩ¥Ê†áÈ¢ò -->
            <div class="drawer-timeline-header">
                <div class="timeline-header-icon">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                </div>
                <div class="timeline-header-title">ÊµÅÁ®ãËøõÂ∫¶</div>
            </div>
            
            <!-- Êó∂Èó¥ËΩ¥‰∏ª‰Ωì -->
            <div class="drawer-timeline" id="drawerTimeline">
                <!-- Áî±JavaScriptÂä®ÊÄÅÁîüÊàê -->
            </div>
        </div>
    </div>

    <!-- Ë∑≥ËøáÈò∂ÊÆµ Modal -->
    <div class="modal-overlay" id="skipStageModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Ë∑≥ËøáÂΩìÂâçÈò∂ÊÆµ</h3>
                <button class="modal-close" onclick="closeSkipStageModal()">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">ÂΩìÂâçÁä∂ÊÄÅ</label>
                    <div id="skipCurrentStatus" style="font-weight: 600; color: var(--blue); font-size: 1.1rem; padding: 0.5rem 0;"></div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ËØ∑ÈÄâÊã©Ë¶ÅË∑≥Âà∞ÁöÑÈò∂ÊÆµ <span style="color: var(--status-danger);">*</span></label>
                    <div id="skipStageOptions" class="skip-options-container">
                        <!-- Âä®ÊÄÅÁîüÊàê -->
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Â§áÊ≥®ÔºàÈÄâÂ°´Ôºâ</label>
                    <textarea id="skipStageNotes" class="form-textarea" rows="3"
                              placeholder="‰æãÂ¶ÇÔºöÂÆ¢Êà∑Ë¶ÅÊ±ÇÂä†ÊÄ•ÔºåË∑≥ËøáÊâìÊ†∑Áõ¥Êé•Áîü‰∫ß"></textarea>
                </div>
            </div>
            <div class="modal-footer" style="display: flex; gap: 1rem; justify-content: flex-end;">
                <button class="btn btn-secondary" onclick="closeSkipStageModal()">ÂèñÊ∂à</button>
                <button class="btn btn-primary" onclick="confirmSkipStage()">Á°ÆËÆ§Ë∑≥Ëøá</button>
            </div>
        </div>
    </div>

    <!-- ÁºñËæë/Êñ∞Â¢ûËÆ¢Âçï Modal -->
    <div class="modal-overlay" id="editOrderModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3 id="editOrderModalTitle">ÁºñËæëËÆ¢Âçï</h3>
                <button class="modal-close" onclick="closeEditOrderModal()">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <label class="form-label">ËÆ¢ÂçïÂè∑</label>
                        <button type="button" id="toggleOrderNumberEdit" class="btn-link" style="display: none; font-size: 0.75rem; padding: 0.25rem 0.5rem; color: #3b82f6; cursor: pointer; background: none; border: none;" onclick="toggleOrderNumberEdit()">
                            ‰øÆÊîπËÆ¢ÂçïÂè∑
                        </button>
                    </div>
                    <input type="text" id="editOrderNumber" class="form-input" placeholder="ÁïôÁ©∫ÂâáÂâµÂª∫Ë©¢ÂÉπ/‰øÆÂúñÈúÄÊ±ÇÔºàËá™ÂãïÁîüÊàêÁ∑®ËôüÔºâ">
                    <div class="form-hint" id="editOrderNumberHint" style="display: none; font-size: 0.75rem; color: #6b7280; margin-top: 0.25rem;"></div>
                    <div class="form-hint" id="editOrderNumberWarning" style="display: none; font-size: 0.75rem; color: #f59e0b; margin-top: 0.25rem;">
                        ‚ö†Ô∏è ‰øÆÊîπËÆ¢ÂçïÂè∑Â∞ÜÂêåÊ≠•Êõ¥Êñ∞ÊâÄÊúâÁõ∏ÂÖ≥ËÆ∞ÂΩï
                    </div>
                    <div class="form-hint" id="editOrderNumberError" style="display: none; font-size: 0.75rem; color: #ef4444; margin-top: 0.25rem; font-weight: 500;"></div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">ÂÆ¢Êà∑ÂêçÁß∞ <span style="color: var(--status-danger);">*</span></label>
                        <input type="text" id="editCustomerName" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ËÆ¢ÂçïÊó•Êúü <span style="color: var(--status-danger);">*</span></label>
                        <input type="date" id="editOrderDate" class="form-input" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">‰∫ßÂìÅÁºñÂè∑</label>
                        <input type="text" id="editProductCode" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Êï∞Èáè</label>
                        <input type="text" id="editQuantity" class="form-input">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Áîü‰∫ßÂ∑•ÂéÇ</label>
                        <input type="text" id="editFactory" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">È¢ÑËÆ°‰∫§Ë¥ßÊó•Êúü <span style="color: #999; font-size: 0.75rem; font-weight: normal;">(ÂèØÈÅ∏)</span></label>
                        <input type="date" id="editExpectedDeliveryDate" class="form-input">
                        <div style="font-size: 0.75rem; color: #999; margin-top: 4px; line-height: 1.4;">
                            
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">‰∫ßÂìÅÁ±ªÂûã</label>
                    <input type="text" id="editProductionType" class="form-input">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Â§áÊ≥®</label>
                    <textarea id="editNotes" class="form-textarea" rows="3"></textarea>
                </div>
            </div>
            <div class="modal-footer" style="display: flex; gap: 1rem; justify-content: flex-end;">
                <button class="btn btn-secondary" onclick="closeEditOrderModal()">ÂèñÊ∂à</button>
                <button class="btn btn-primary" onclick="confirmEditOrder()" id="editOrderSubmitBtn">‰øùÂ≠ò‰øÆÊîπ</button>
            </div>
        </div>
    </div>

    <!-- ÂèñÊ∂àËÆ¢Âçï Modal -->
    <div class="modal-overlay" id="cancelOrderModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ÂèñÊ∂àËÆ¢Âçï</h3>
                <button class="modal-close" onclick="closeCancelOrderModal()">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">ËÆ¢ÂçïÂè∑</label>
                    <div id="cancelOrderNumber" style="font-weight: 600; color: var(--text-1); font-size: 1.1rem; padding: 0.5rem 0;"></div>
                </div>
                
                <div class="alert alert-warning" style="margin-bottom: 1rem; padding: 1rem; background: #fef3c7; border-left: 4px solid #f59e0b; border-radius: 0.5rem;">
                    <strong>‚ö†Ô∏è Ë≠¶Âëä</strong><br>
                    ÂèñÊ∂àËÆ¢ÂçïÂêéÊó†Ê≥ïÊÅ¢Â§çÔºåËØ∑Ë∞®ÊÖéÊìç‰ΩúÔºÅ
                </div>
                
                <div class="form-group">
                    <label class="form-label">ÂèñÊ∂àÂéüÂõ† <span style="color: var(--status-danger);">*</span></label>
                    <textarea id="cancelReason" class="form-textarea" rows="4" 
                              placeholder="ËØ∑ËØ¶ÁªÜËØ¥ÊòéÂèñÊ∂àÂéüÂõ†..." required></textarea>
                </div>
            </div>
            <div class="modal-footer" style="display: flex; gap: 1rem; justify-content: flex-end;">
                <button class="btn btn-secondary" onclick="closeCancelOrderModal()">ËøîÂõû</button>
                <button class="btn btn-danger" onclick="confirmCancelOrder()">Á°ÆËÆ§ÂèñÊ∂àËÆ¢Âçï</button>
            </div>
        </div>
    </div>

    <!-- ÂÖ±Áî®ÔºöToastÊèêÁ§∫ -->
    <div class="toast" id="toast">
        <div class="toast-icon">‚úÖ</div>
        <div class="toast-content">
            <div class="toast-title" id="toastTitle">Êìç‰ΩúÊàêÂäü</div>
            <div class="toast-message" id="toastMessage">Êõ¥Êñ∞Â∑≤‰øùÂ≠ò</div>
        </div>
    </div>

    <!-- ÈÄöÁî®Á°ÆËÆ§ Modal -->
    <div class="modal-overlay" id="confirmModal" onclick="if(event.target === this) closeConfirmModal()">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title" id="confirmModalTitle">Á°ÆËÆ§Êìç‰Ωú</div>
                <button class="modal-close" onclick="closeConfirmModal()">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="modal-info">
                    <!-- Áä∂ÊÄÅËΩ¨Êç¢ÊòæÁ§∫Âå∫ÂüüÔºàÂèØÈÄâÔºåÂè™Âú®ÊúâÁä∂ÊÄÅ‰ø°ÊÅØÊó∂ÊòæÁ§∫Ôºâ -->
                    <div id="confirmModalStatusChange" class="status-change" style="display: none;">
                        <span id="confirmModalCurrentStatus" style="font-weight: 600; color: var(--text-1);"></span>
                        <span class="status-arrow" style="font-size: 1.2rem; color: var(--text-2);">‚Üí</span>
                        <span id="confirmModalNextStatus" style="font-weight: 600; color: var(--blue);"></span>
                    </div>
                    <!-- ËÆ¢ÂçïÂè∑ÊòæÁ§∫ÔºàÂèØÈÄâÔºâ -->
                    <div id="confirmModalOrderInfo" style="text-align: center; font-size: 0.85rem; color: var(--text-2); margin-top: 0.5rem; display: none;">
                        ËÆ¢Âçï <strong id="confirmModalOrderNumber">#-</strong>
                    </div>
                    <!-- ÊôÆÈÄöÊ∂àÊÅØÊòæÁ§∫ -->
                    <div id="confirmModalMessage" style="white-space: pre-line; line-height: 1.6;"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel" onclick="closeConfirmModal()">ÂèñÊ∂à</button>
                <button class="modal-btn confirm" id="confirmModalConfirmBtn">Á°ÆËÆ§</button>
            </div>
        </div>
    </div>

    <!-- ÈÄöÁî®ÊèêÁ§∫ Modal -->
    <div class="modal-overlay" id="alertModal" onclick="if(event.target === this) closeAlertModal()">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title" id="alertModalTitle">ÊèêÁ§∫</div>
                <button class="modal-close" onclick="closeAlertModal()">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="modal-info">
                    <div id="alertModalMessage" style="white-space: pre-line; line-height: 1.6;"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn confirm" id="alertModalConfirmBtn">Á°ÆÂÆö</button>
            </div>
        </div>
    </div>

    <script src="{{ url_for('tracking_bp.static', filename='js/STATUS_SYSTEM.js') }}"></script>
    <!-- Ë®≠ÂÆö Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="settings-modal">
            <div class="settings-sidebar">
                <div class="settings-sidebar-header">
                    <h3>Ë®≠ÂÆö</h3>
                    <button class="settings-close" onclick="closeSettingsModal()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                <div class="settings-menu">
                    <button class="settings-menu-item active" onclick="showSettingsSection('columns')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="9" y1="3" x2="9" y2="21"></line>
                            <line x1="3" y1="9" x2="21" y2="9"></line>
                        </svg>
                        <span>Ë°®Ê†ºÊ¨Ñ‰Ωç</span>
                    </button>
                </div>
            </div>
            <div class="settings-content">
                <div class="settings-section active" id="settingsColumns">
                    <h2>Ë°®Ê†ºÊ¨Ñ‰ΩçË®≠ÂÆö</h2>
                    <p class="settings-description">ÈÅ∏ÊìáË¶ÅÂú®Ë°®Ê†º‰∏≠È°ØÁ§∫ÁöÑÊ¨Ñ‰Ωç</p>
                    <div class="column-settings-container">
                        <div id="columnSettingsList" class="column-settings-list">
                            <!-- Áî± JavaScript ÂãïÊÖãÁîüÊàê -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('tracking_bp.static', filename='js/new_order.js') }}"></script>
    <script src="{{ url_for('tracking_bp.static', filename='js/tracking.js') }}"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>
